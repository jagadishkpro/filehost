<html>
  <head>
    <title>Data Layer: Simple</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    
  </head>
  <body>
  <style>

#map {
  height: 100%;
}

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
  </style>
    <div id="map"></div>

   
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&v=weekly"
      defer
    ></script>
	<script>
	
	var data = {"type":"FeatureCollection","name":"zone1and2","features":[{"type":"Feature","properties":{"Zone":1},"geometry":{"type":"MultiPolygon","coordinates":[[[[-83.218227,42.408342],[-83.218203,42.401127],[-83.218203,42.400665],[-83.217194,42.397767],[-83.216819,42.386724],[-83.216952,42.382172],[-83.21755,42.386712],[-83.216931,42.378803],[-83.225541,42.37809],[-83.231853,42.378223],[-83.233884,42.378839],[-83.236653,42.380462],[-83.236561,42.378763],[-83.24019,42.379038],[-83.255852,42.378916],[-83.266663,42.378604],[-83.274999,42.378433],[-83.275309,42.378428],[-83.27532,42.379413],[-83.275449,42.380906],[-83.275056,42.380928],[-83.275941,42.407281],[-83.276681,42.407278],[-83.285608,42.407026],[-83.286463,42.407],[-83.297147,42.406765],[-83.314576,42.405912],[-83.315306,42.406434],[-83.315528,42.411479],[-83.316825,42.442033],[-83.287803,42.442683],[-83.258867,42.443403],[-83.259401,42.447982],[-83.255739,42.44806],[-83.259725,42.449667],[-83.260217,42.460892],[-83.257025,42.460943],[-83.257484,42.462439],[-83.25695,42.464674],[-83.260367,42.464438],[-83.261018,42.478921],[-83.251255,42.479523],[-83.254154,42.480976],[-83.261208,42.483461],[-83.261216,42.483781],[-83.253396,42.480975],[-83.250724,42.479555],[-83.24085,42.480089],[-83.240702,42.47649],[-83.237494,42.476613],[-83.233437,42.478432],[-83.232809,42.48009],[-83.231185,42.480468],[-83.202198,42.481107],[-83.202384,42.488359],[-83.183376,42.488727],[-83.158629,42.489485],[-83.153202,42.483684],[-83.153165,42.482482],[-83.153759,42.478617],[-83.153503,42.474169],[-83.155626,42.474122],[-83.155057,42.467658],[-83.154108,42.46767],[-83.138616,42.467944],[-83.13324,42.468196],[-83.13374,42.47542],[-83.113975,42.47593],[-83.113743,42.46854],[-83.111361,42.468595],[-83.110557,42.461196],[-83.109626,42.446959],[-83.124708,42.446578],[-83.133115,42.446395],[-83.171265,42.445545],[-83.170184,42.436642],[-83.170846,42.43471],[-83.169759,42.434827],[-83.169642,42.431255],[-83.170698,42.431249],[-83.170569,42.427623],[-83.169544,42.427648],[-83.169463,42.425833],[-83.170502,42.425825],[-83.170016,42.414665],[-83.165872,42.410727],[-83.170004,42.414418],[-83.169768,42.409535],[-83.203218,42.408662],[-83.204459,42.409536],[-83.204423,42.408655],[-83.218227,42.408342]]]]}},{"type":"Feature","properties":{"Zone":2},"geometry":{"type":"MultiPolygon","coordinates":[[[[-83.147316,42.234793],[-83.147841,42.22739],[-83.14362,42.222596],[-83.141327,42.218461],[-83.141244,42.217078],[-83.141671,42.214132],[-83.143223,42.211263],[-83.144632,42.210036],[-83.144061,42.209083],[-83.146895,42.203441],[-83.143236,42.202618],[-83.146085,42.199966],[-83.148557,42.191958],[-83.150561,42.189189],[-83.152219,42.185115],[-83.15442,42.185409],[-83.179593,42.185014],[-83.228123,42.184279],[-83.229843,42.227545],[-83.231911,42.269879],[-83.225394,42.270161],[-83.224177,42.270607],[-83.221627,42.272534],[-83.217729,42.277222],[-83.205137,42.291853],[-83.204608,42.29289],[-83.20472,42.296146],[-83.206197,42.298412],[-83.200714,42.300524],[-83.199129,42.301161],[-83.188529,42.29537],[-83.18364,42.295259],[-83.180537,42.294726],[-83.179395,42.294785],[-83.176869,42.295341],[-83.17421,42.297479],[-83.17093,42.294549],[-83.171445,42.293138],[-83.169133,42.291609],[-83.169978,42.289774],[-83.167074,42.289571],[-83.161748,42.291789],[-83.157401,42.293014],[-83.155617,42.295476],[-83.151079,42.296233],[-83.149763,42.295566],[-83.148823,42.293202],[-83.147468,42.292539],[-83.144473,42.293584],[-83.141563,42.295457],[-83.140403,42.299054],[-83.141652,42.302172],[-83.142494,42.305502],[-83.140584,42.306846],[-83.139717,42.308662],[-83.14078,42.311008],[-83.147038,42.31963],[-83.153209,42.328087],[-83.155005,42.327654],[-83.155354,42.328138],[-83.156594,42.327798],[-83.156981,42.336961],[-83.153713,42.337333],[-83.150814,42.338784],[-83.149197,42.341072],[-83.147545,42.349918],[-83.147736,42.351916],[-83.138246,42.352101],[-83.122661,42.35183],[-83.113635,42.355212],[-83.111649,42.355732],[-83.111012,42.355954],[-83.109068,42.35747],[-83.097557,42.361957],[-83.092837,42.363092],[-83.093574,42.364236],[-83.091528,42.364991],[-83.091122,42.363732],[-83.086601,42.36539],[-83.085228,42.365418],[-83.088062,42.363574],[-83.083396,42.363001],[-83.081276,42.35892],[-83.078998,42.357708],[-83.080993,42.356037],[-83.076514,42.358757],[-83.073917,42.3536],[-83.077592,42.352446],[-83.074668,42.348629],[-83.070542,42.341445],[-83.068904,42.341957],[-83.068222,42.34018],[-83.066207,42.339359],[-83.066331,42.338376],[-83.06748,42.338017],[-83.067049,42.337264],[-83.069767,42.336413],[-83.068786,42.334677],[-83.073272,42.333573],[-83.065643,42.334474],[-83.06434,42.333674],[-83.066804,42.33379],[-83.06595,42.332282],[-83.063069,42.328405],[-83.060522,42.32734],[-83.061848,42.326769],[-83.060461,42.325079],[-83.063023,42.323988],[-83.062537,42.32337],[-83.064506,42.322742],[-83.063293,42.322401],[-83.066145,42.321664],[-83.065573,42.320025],[-83.075635,42.314349],[-83.078526,42.312752],[-83.082501,42.30938],[-83.084889,42.306633],[-83.097885,42.293751],[-83.101914,42.290078],[-83.102185,42.289747],[-83.102465,42.289499],[-83.102615,42.289416],[-83.103666,42.287922],[-83.111132,42.275651],[-83.112213,42.269473],[-83.113659,42.266034],[-83.115594,42.264067],[-83.117256,42.260812],[-83.11961,42.26086],[-83.117648,42.259072],[-83.119839,42.255461],[-83.124607,42.258075],[-83.120187,42.255043],[-83.125634,42.247972],[-83.134687,42.243908],[-83.140775,42.24201],[-83.141799,42.242857],[-83.143499,42.241076],[-83.147316,42.234793]]],[[[-83.134831,42.221651],[-83.133669,42.222785],[-83.131594,42.223015],[-83.132163,42.21994],[-83.133367,42.218986],[-83.134379,42.218185],[-83.135464,42.218701],[-83.134831,42.221651]]],[[[-83.134644,42.227384],[-83.132862,42.227178],[-83.131928,42.22699],[-83.13182,42.226675],[-83.133825,42.226243],[-83.134644,42.227384]]],[[[-83.138433,42.227561],[-83.135253,42.229786],[-83.135721,42.228103],[-83.137021,42.226509],[-83.139755,42.224945],[-83.138433,42.227561]]]]}},{"type":"Feature","properties":{"Zone":1},"geometry":{"type":"MultiPolygon","coordinates":[[[[-83.218227,42.408342],[-83.218203,42.401127],[-83.218203,42.400665],[-83.217194,42.397767],[-83.216819,42.386724],[-83.216952,42.382172],[-83.21755,42.386712],[-83.216931,42.378803],[-83.225541,42.37809],[-83.231853,42.378223],[-83.233884,42.378839],[-83.236653,42.380462],[-83.236561,42.378763],[-83.24019,42.379038],[-83.255852,42.378916],[-83.266663,42.378604],[-83.274999,42.378433],[-83.275309,42.378428],[-83.27532,42.379413],[-83.275449,42.380906],[-83.275056,42.380928],[-83.275941,42.407281],[-83.276681,42.407278],[-83.285608,42.407026],[-83.286463,42.407],[-83.297147,42.406765],[-83.314576,42.405912],[-83.315306,42.406434],[-83.315528,42.411479],[-83.316825,42.442033],[-83.287803,42.442683],[-83.258867,42.443403],[-83.259401,42.447982],[-83.255739,42.44806],[-83.259725,42.449667],[-83.260217,42.460892],[-83.257025,42.460943],[-83.257484,42.462439],[-83.25695,42.464674],[-83.260367,42.464438],[-83.261018,42.478921],[-83.251255,42.479523],[-83.254154,42.480976],[-83.261208,42.483461],[-83.261216,42.483781],[-83.253396,42.480975],[-83.250724,42.479555],[-83.24085,42.480089],[-83.240702,42.47649],[-83.237494,42.476613],[-83.233437,42.478432],[-83.232809,42.48009],[-83.231185,42.480468],[-83.202198,42.481107],[-83.202384,42.488359],[-83.183376,42.488727],[-83.158629,42.489485],[-83.153202,42.483684],[-83.153165,42.482482],[-83.153759,42.478617],[-83.153503,42.474169],[-83.155626,42.474122],[-83.155057,42.467658],[-83.154108,42.46767],[-83.138616,42.467944],[-83.13324,42.468196],[-83.13374,42.47542],[-83.113975,42.47593],[-83.113743,42.46854],[-83.111361,42.468595],[-83.110557,42.461196],[-83.109626,42.446959],[-83.124708,42.446578],[-83.133115,42.446395],[-83.171265,42.445545],[-83.170184,42.436642],[-83.170846,42.43471],[-83.169759,42.434827],[-83.169642,42.431255],[-83.170698,42.431249],[-83.170569,42.427623],[-83.169544,42.427648],[-83.169463,42.425833],[-83.170502,42.425825],[-83.170016,42.414665],[-83.165872,42.410727],[-83.170004,42.414418],[-83.169768,42.409535],[-83.203218,42.408662],[-83.204459,42.409536],[-83.204423,42.408655],[-83.218227,42.408342]]]]},"id":2},{"type":"Feature","properties":{"Zone":2},"geometry":{"type":"MultiPolygon","coordinates":[[[[-83.147316,42.234793],[-83.147841,42.22739],[-83.14362,42.222596],[-83.141327,42.218461],[-83.141244,42.217078],[-83.141671,42.214132],[-83.143223,42.211263],[-83.144632,42.210036],[-83.144061,42.209083],[-83.146895,42.203441],[-83.143236,42.202618],[-83.146085,42.199966],[-83.148557,42.191958],[-83.150561,42.189189],[-83.152219,42.185115],[-83.15442,42.185409],[-83.179593,42.185014],[-83.228123,42.184279],[-83.229843,42.227545],[-83.231911,42.269879],[-83.225394,42.270161],[-83.224177,42.270607],[-83.221627,42.272534],[-83.217729,42.277222],[-83.205137,42.291853],[-83.204608,42.29289],[-83.20472,42.296146],[-83.206197,42.298412],[-83.200714,42.300524],[-83.199129,42.301161],[-83.188529,42.29537],[-83.18364,42.295259],[-83.180537,42.294726],[-83.179395,42.294785],[-83.176869,42.295341],[-83.17421,42.297479],[-83.17093,42.294549],[-83.171445,42.293138],[-83.169133,42.291609],[-83.169978,42.289774],[-83.167074,42.289571],[-83.161748,42.291789],[-83.157401,42.293014],[-83.155617,42.295476],[-83.151079,42.296233],[-83.149763,42.295566],[-83.148823,42.293202],[-83.147468,42.292539],[-83.144473,42.293584],[-83.141563,42.295457],[-83.140403,42.299054],[-83.141652,42.302172],[-83.142494,42.305502],[-83.140584,42.306846],[-83.139717,42.308662],[-83.14078,42.311008],[-83.147038,42.31963],[-83.153209,42.328087],[-83.155005,42.327654],[-83.155354,42.328138],[-83.156594,42.327798],[-83.156981,42.336961],[-83.153713,42.337333],[-83.150814,42.338784],[-83.149197,42.341072],[-83.147545,42.349918],[-83.147736,42.351916],[-83.138246,42.352101],[-83.122661,42.35183],[-83.113635,42.355212],[-83.111649,42.355732],[-83.111012,42.355954],[-83.109068,42.35747],[-83.097557,42.361957],[-83.092837,42.363092],[-83.093574,42.364236],[-83.091528,42.364991],[-83.091122,42.363732],[-83.086601,42.36539],[-83.085228,42.365418],[-83.088062,42.363574],[-83.083396,42.363001],[-83.081276,42.35892],[-83.078998,42.357708],[-83.080993,42.356037],[-83.076514,42.358757],[-83.073917,42.3536],[-83.077592,42.352446],[-83.074668,42.348629],[-83.070542,42.341445],[-83.068904,42.341957],[-83.068222,42.34018],[-83.066207,42.339359],[-83.066331,42.338376],[-83.06748,42.338017],[-83.067049,42.337264],[-83.069767,42.336413],[-83.068786,42.334677],[-83.073272,42.333573],[-83.065643,42.334474],[-83.06434,42.333674],[-83.066804,42.33379],[-83.06595,42.332282],[-83.063069,42.328405],[-83.060522,42.32734],[-83.061848,42.326769],[-83.060461,42.325079],[-83.063023,42.323988],[-83.062537,42.32337],[-83.064506,42.322742],[-83.063293,42.322401],[-83.066145,42.321664],[-83.065573,42.320025],[-83.075635,42.314349],[-83.078526,42.312752],[-83.082501,42.30938],[-83.084889,42.306633],[-83.097885,42.293751],[-83.101914,42.290078],[-83.102185,42.289747],[-83.102465,42.289499],[-83.102615,42.289416],[-83.103666,42.287922],[-83.111132,42.275651],[-83.112213,42.269473],[-83.113659,42.266034],[-83.115594,42.264067],[-83.117256,42.260812],[-83.11961,42.26086],[-83.117648,42.259072],[-83.119839,42.255461],[-83.124607,42.258075],[-83.120187,42.255043],[-83.125634,42.247972],[-83.134687,42.243908],[-83.140775,42.24201],[-83.141799,42.242857],[-83.143499,42.241076],[-83.147316,42.234793]]],[[[-83.134831,42.221651],[-83.133669,42.222785],[-83.131594,42.223015],[-83.132163,42.21994],[-83.133367,42.218986],[-83.134379,42.218185],[-83.135464,42.218701],[-83.134831,42.221651]]],[[[-83.134644,42.227384],[-83.132862,42.227178],[-83.131928,42.22699],[-83.13182,42.226675],[-83.133825,42.226243],[-83.134644,42.227384]]],[[[-83.138433,42.227561],[-83.135253,42.229786],[-83.135721,42.228103],[-83.137021,42.226509],[-83.139755,42.224945],[-83.138433,42.227561]]]]},"id":3}]};
	var storeJson = [{
        "CLIENTS NAME": "SIGNATURE",
        "ADDRESS": "5 Passage Giboin",
        "POST CODE": "3200",
        "CITY": "VICHY",
        "PHONE": "04 70 96 88 35",
        "EMAIL": "signature.vichy@gmail.com",
        "COMPLETE ADDRESS": "5 Passage Giboin,VICHY,3200",
        "COORDINATES": [42.4287807563573, -83.04564665519679]
    }, {
        "CLIENTS NAME": "JBONET",
        "ADDRESS": "25 Rue Scaliero",
        "POST CODE": "6300",
        "CITY": "NICE",
        "PHONE": "04 92 00 36 66",
        "EMAIL": "rjourdan@jbonet-mobilier.com",
        "COMPLETE ADDRESS": "25 Rue Scaliero,NICE,6300",
        "COORDINATES": [42.26943591173653, -83.33335112759151]
    }, {
        "CLIENTS NAME": "JBONET",
        "ADDRESS": "33 Rue de la Buffa",
        "POST CODE": "6000",
        "CITY": "NICE",
        "PHONE": "04 93 54 77 52",
        "EMAIL": "cguigou@jbonet-mobilier.com",
        "COMPLETE ADDRESS": "33 Rue de la Buffa,NICE,6000",
        "COORDINATES": [42.59746987667821, -83.18921371745044]
    }, {
        "CLIENTS NAME": "JBONET",
        "ADDRESS": "2 Rue d'Alger",
        "POST CODE": "6400",
        "CITY": "CANNES",
        "PHONE": "04 93 39 98 23",
        "EMAIL": null,
        "COMPLETE ADDRESS": "2 Rue d'Alger,CANNES,6400",
        "COORDINATES": [42.23504361148625, -83.16488453274258]
    }
	]
	
	let map;
var infowindow;
var markers = [];
function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 10,
    center: { lat: 42.50737738713244, lng:-83.15445721540152 },
  });
  
  infowindow = new google.maps.InfoWindow();
  
  map.data.addGeoJson(data);
  
  map.data.setStyle(function(feature) {
    var zoneName = feature.getProperty('Zone');
	if(zoneName == 1){
		var color = 'red';
		return {
		  fillColor: color,
		  strokeWeight: 1
		};
	}else if(zoneName == 2){
		var color = 'white';
		return {
		  fillColor: color,
		  strokeWeight: 1
		};
	}
    
	});
	
	map.data.addListener('click', function(event) {
     var feat = event.feature;
     var html = "<b>"+feat.getProperty('Zone');
     //html += "<br><a class='normal_link' target='_blank' href='"+feat.getProperty('link')+"'>link</a>";
     infowindow.setContent(html);
     infowindow.setPosition(event.latLng);
     infowindow.setOptions({pixelOffset: new google.maps.Size(0,-34)});
     infowindow.open(map);
  });
  
  
  
  markers = storeJson.map((store) => {

        const[lat, lng] = store.COORDINATES;

        var icon = {
            url: "https://flexcube.ch/wp-content/uploads/2022/02/locationpin.png", // url
            scaledSize: new google.maps.Size(40, 40), // scaled size

        };

        var marker = new google.maps.Marker({
            icon: icon,
            position: {
                lat,
                lng
            },
            map: map,
            phone: store.PHONE,
            city: store.CITY,
            name: store["CLIENTS NAME"],
            email: store.EMAIL
        });

        marker.addListener("click", () => {
            infowindow.setContent(
                "<b>" + store["CLIENTS NAME"] + "</b> <br/><br/>" + store["COMPLETE ADDRESS"] + "<br/><br/>" + store.PHONE + "<br/><br/>" + store.EMAIL + '<br/><br/> <a target="_blank" href="https://www.google.com/maps/search/?api=1&query=' + marker.getPosition().lat() + "," + marker.getPosition().lng() + '">View in Google Maps</a>');
            //infowindow.setPosition({ lat, lng });

            infowindow.open(map, marker);
			map.panTo(marker.getPosition());
        });

        return marker;
    });
  
}

window.initMap = initMap;
	</script>
  </body>
</html>